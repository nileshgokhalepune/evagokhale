import { Component, OnInit, ViewContainerRef, ComponentFactoryResolver, AfterViewInit, ViewChild } from '@angular/core';
import { StartupService } from './services/startup.service';
import { FamilyComponent, currentUser } from './user/user.component';

@Component({
    selector: 'app',
    template: `
<<<<<<< HEAD
        <div>
            <div class="header">
                Your Family
            </div>
            <div  style="position:relative">
                <family *ngIf="isLoggedin" [user]="user"></family>
            </div>
            <login *ngIf="!isLoggedin">
            </login>
=======
        <div class="header">
            Family
>>>>>>> 8c78fa933c282df185cf5bd304568e46d5b487a1
        </div>
        <div class="main" #main>
            <family-container [user]="user"></family-container>
        </div>
        <div class="other" #other>
        </div>

    `
})
export class AppComponent implements OnInit, AfterViewInit {
    private isLoggedin: boolean = false;
    private user: any;
    @ViewChild('other', { read: ViewContainerRef }) otherContainer: ViewContainerRef;
    @ViewChild('main', { read: ViewContainerRef }) main: ViewContainerRef;

    constructor(private startup: StartupService, private componentFactoryResolver: ComponentFactoryResolver) {
    }

    public ngOnInit() {
        this.isLoggedin = this.startup.loggedin();
        if (this.isLoggedin) {
            this.user = this.startup.user();
        }
    }

    public ngAfterViewInit() {
        // this.main.clear();
        // var familyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(FamilyComponent);
        // var mainInstance = this.main.createComponent(familyComponentFactory).instance;
        // mainInstance.user = this.user;
    }
}